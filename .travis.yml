language: python
python:
  - "3.7"

deploy:
  provider: gae
  keyfile: gcloud-key
  project: obsmainservice

jobs:
  include:
    - stage: build
      script: pip install -r requirements.txt
    - #install node dependencies and try to use webpack to build javascript
      script:
        - npm install
        - npm run build
    - stage: test
    -
      script: pytest main_test.py
    -
      script:
        - npm i
        - ./node_modules/.bin/cypress run
    - stage: linting
      script:
        - pylint -E main.py
